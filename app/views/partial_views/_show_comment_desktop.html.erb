<% if user_signed_in? %>
    <!-- TODO: Form Helper 완성시키기 -->
    <% model = comments.first.model %>
    <%= form_for model.new, url: model.to_s == 'FeedComment' ? feed_feed_comments_path(parent_id) :
                                    upcoming_upcoming_comments_path(parent_id), remote: true do |f| %>
        <div class="_comment-container _vcenter-positioner">
          <%= f.hidden_field :model_id, value: parent_id %>
          <%= f.hidden_field :user_id, value: current_user.id %>
          <div class="_comment-profile-container">
            <%= image_tag current_user.profile_img, class: "_profile-img" %>
          </div>
          <p class="_fs-4 _white"><%= current_user.nickname %></p>
          <%= f.text_area :content, class: "autosize _comment-input-container _fs-4 _white _flex-grow-1", rows: 1, placeholder: "댓글을 입력해주세요!" %>
        </div>
        <%= f.submit "게시", class: "_display-none" %>
        <script>
            //enter-> submit, shift+enter-> newline
            $('textarea').on('keydown', function(event) {
                if (event.keyCode == 13 && !event.shiftKey)
                    $(':submit').click();
            });
        </script>
    <% end %>
<% end %>

<div class="_comments-group">
  <%= render partial: "/partial_views/comment_card_desktop", collection: comments.order('created_at DESC'), as: :comment %>
</div>
